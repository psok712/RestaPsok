# RestaPsok
# Система управления заказами в ресторане
**ВАЖНО:** для тестирования API необходим Postman
## Общие моменты
Всего API управляется 5 контроллерами: 
* UserController - для регистрации, входа, выхода пользователей, а также получения информации о текущем пользователе (достигается по пути `/api/user`)
* AdminController - для выполнения действий от лица администратора (добавление и удаление блюд в меню, а также получение статистики по ресторану (список блюд по убыванию популярности, средняя оценка блюд, количество заказов за определенный период) (достигается по пути `/api/admin`). Для авторизации нужно после пути вбить данные администратора (`/api/admin/{admin_name}&{password}`), если есть пользователем с такими данными и ролью админа, то предоставится доступ к его возможностям.
* MenuItemController - для выполнения действий, связанных с меню (получение всего списка блюд и блюда по его идентификатору) (достигается по пути `/api/menu`)
* OrderPositionController - для выполнения действий, связанных с заказами (получение всего списка заказов, заказа по индентификатору, создания заказа, отмены заказа и оплаты заказа) (достигается по пути `/api/order`)
* ReviewController - для выполения действий, связанных с отзывами о блюдах (получение всего списка отзывов, получение отзыва по идентификатору и создание нового отзыва) (достигается по пути `/api/review`)

Перед выполнением действия от лица пользователя не требуется вход в систему по логину и паролю, только для администратора требуется ввести соответсвующие данные для получения доступа. 

## Администратор
Авторизованный в системе администратор может выполнить следующие запросы:
* Создание блюда через **POST-запрос** `localhost:8080/api/admin/'данные админа'` с указанием в **Query Params** следующих полей: dish - имя блюда (String), price - цена блюда (BigDecimal), cookingTimeMinute - время приготовления в минутах (Int), amount - количество блюд в наличии (Int)
* Удаление блюда через **DELETE-запрос** `localhost:8080/api/admin/'данные админа'/{id_dish}`
* Получение статистики ресторана по блюдам через **GET-запрос** `localhost:8080/api/admin/'данные админа'/stat`

Каждый из перечисленных методов в случае ошибки возвращает строку, содержащую подробную причину возникновения исключительной ситуации

## Посетитель
Пользователь может выполнить следующие запросы:
* Создание заказа через **POST-запрос** `localhost:8080/api/visitor/createOrder` с указанием в **Query Params** следующих полей: idGuest - id посетителя (Int), idMenuItem - id блюда из меню (Int) (Статус заказа выставляется 'PENDING')
* Отмена заказа через **PUT-запрос** `localhost:8080/api/visitor/cancel/{id}`
* Отмена заказа через **PUT-запрос** `localhost:8080/api/visitor/pay/{id}`
* Дать отзыв заказу через **POST-запрос** `localhost:8080/api/review` c указанием в **Query Params** следующих полей: orderId - id заказа, который пользователь хочет оценить (Long), grade - оценка заказа (от 1 до 5), review - текст отзыва (String). 

Каждый из перечисленных методов в случае ошибки возвращает строку, содержащую подробную причину возникновения исключительной ситуации

Также для работы были созданы вспомогательные **POST** и **GET** запросы, которые можно увидеть в контроллерах. Они были созданы для создания пользователей, получения полного списка базы данных и обновления. Я не стал их инкапсулировать, чтобы тестировать приложение было удобнее.

## Примечание
* Все строки, вводимые пользователем не должны превышать 255 символов
* При разработке приложения были использованы паттерны проектирования такие, как строитель, фабричный метод, фасад и др. - также были соблюдены SOLID И DRY&KISS принципы.
* К сожалению, у меня не получилось внедрить многопоточное обработку заказов...
